# Codes to run in the IDI to create data for the tool
This directory contains SAS code to be applied in the IDI to construct the data for the Tool. The descriptions here are very high level, and may glance over some details

## 00 Core
The SAS file 00_core.sas contains links to the other files in a runable fashion.

## 01 base population
The SAS file 01_base_population.sas constucts a base population from MOE completions.

## 02 get information about the population

| SAS file | Description |
| ------------- | ------------- |
| 02_get_ethnicity.sas  | Gets the ethnicity information for the defined population  |
| 02_Migration_country_birth_vars.sas  | Find out which individuals are migrates  |
| 02a_OS_days.sas | Calculates how many days the individuals were overseas per year (between the first year and last year of analysis as defined in 00_core.sas) |

## 03 get MOE information about initial study

| SAS file | Description |
| ------------- | ------------- |
| 03_Tertiary_comp.sas  | Gets completions records from the MOE table  |
| 03_Tertiary_enrol.sas  | Gets enrolment records from the MOE table  |
| 03_Tertiary_summary.sas | Joins together the completion records with relating enrolment records |


## 05 study population
Narrow the study population based on Tertiary enrolment and completion activity.

## 06 constuct post study indicators and measurements

| SAS file | Description |
| ------------- | ------------- |
| 06_Post_benefit.sas  | Gets information relating to benefits |
| 06_Post_custody.sas  | Checks if individuals have been in custody  |
| 06_Post_education.sas | Checks if individuals have returned to study |
| 06_Post_employment.sas | Gets information about employment outcomes such as monthly income, and region of employment |
| 06_Post_OS_days.sas | Calculate days overseas on a monthly basis |
| 06_post_parenthood.sas | Decide if an individual has a young child (here meaning less than 5 years), and thus could be a stay at home Mum of Dad |
| 06_Post_student_support.sas | Get information about things like student loans and allowances |

## 07 Tabulation
The 07_DESCRIPTIVES.sas file is used to calculate tables for the report.

The 07_Results_TAB.sas file brings together datasets generated by the above files, constucts indicators and then tabulates them. It outputs 2 datasets: cube & income_cube

## 08_counting_and_rerounding.sas
This computes underlying counts for educational and employment entities and applies the necessary suppression. It also applies Random Rounding to base 3 (RR3) to the counts.

## 09 Export.sas
This outputs the suppressed and rounded datacube (along with some raw data for checking purposes) to excel files.

## Other files

| SAS file | Description |
| ------------- | ------------- |
| cpi_macro.sas | Used by the 06_employment codes to apply CPI conversion |
| FORMATS_new.sas | Formats |
| INCOME_macro_test.sas | If this file does anything it would be to do with Income, not sure though. |
| pb_formats.sas | Another formats file |
| STAND_macro_new.sas | Some standard macros |
| Std_libs.txt | lib statments for all the IDI folders |